function initializeMedia(t,e,i,a,r,o){var d=jQuery("#"+o);if(r==e)n=e;else{var n=new Image(i,a);n.src=r}jQuery("#media_preview_"+o).popover({trigger:"hover",placement:"right",content:n,html:!0});var p=d.val();d.tooltip("destroy").tooltip({placement:"top",title:p})}function jInsertFieldValue(t,e){var i=jQuery("#"+e);i.val(t).trigger("change"),parent.jQuery("#imageModal_"+e,parent.document).modal("hide");var a=i.val(),r=jQuery("#media_preview_"+e).data("popover"),o=new Image(previewWidth,previewHeight);""==a?(r.options.content=empty,jQuery("#"+e).tooltip("destroy")):(o.src=path+a,r.options.content=o,jQuery("#"+e).tooltip("destroy").tooltip({placement:"top",title:a}))}function saveAndCloseModal(t){fieldId=parent.window.jQuery(t).closest(".controls").find("input").attr("id"),value=parent.window.jQuery("#imageModal_"+fieldId+" iframe").contents().find("#f_url").val(),top.window.jInsertFieldValue(value,fieldId)}function clearMediaInput(t){return emptyStr=jQuery(t).data("emptystring"),jQuery(t).closest(".input-append").find(".hasTooltip").val("").tooltip("destroy"),jQuery(t).closest(".input-append").find(".pop-helper").data("popover").options.content=emptyStr,!1}jQuery(document).ready(function(t){t(document.body).find('a[data-target^="#imageModal_"]').first();t(document.body).find('a[data-target^="#imageModal_"]').each(function(){path=t(this).attr("data-basepath"),empty=t(this).attr("data-emptystring"),source=t(this).attr("data-source"),fieldId=t(this).attr("data-fieldId"),previewWidth=t(this).attr("data-previewWidth"),previewHeight=t(this).attr("data-previewHeight"),initializeMedia(path,empty,previewWidth,previewHeight,source,fieldId)})});